(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{115:function(e,t,n){},14:function(e,t,n){e.exports={btn:"app-header_btn__3TwgT",text:"app-header_text__1MWe2",header:"app-header_header__1aEKL",navBox:"app-header_navBox__3turo",logo:"app-header_logo__2hEKJ",navBox2:"app-header_navBox2__2vmqU",activeLink:"app-header_activeLink__1axER"}},16:function(e,t,n){e.exports={body:"burger-ingredients_body__2_PEo",header:"burger-ingredients_header__PSEI8",ingredients:"burger-ingredients_ingredients__2TY9H",container:"burger-ingredients_container__EME_h",nav:"burger-ingredients_nav__ICNB4",btn:"burger-ingredients_btn__2nKHx",tag:"burger-ingredients_tag__EUm2b",link:"burger-ingredients_link__2-zFo"}},17:function(e,t,n){e.exports={box:"ingredient-details_box__13uO5",title:"ingredient-details_title__2_5MB",container:"ingredient-details_container__1-8YX",image:"ingredient-details_image__H2-xP",descriptor:"ingredient-details_descriptor__AX7r9",list:"ingredient-details_list__2aOfA",heading:"ingredient-details_heading__bGiiD",numbers:"ingredient-details_numbers__iywG6"}},201:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return bt}));var r=n(1),c=n.n(r),a=n(39),i=n.n(a),s=(n(115),n(2)),o=n(78),u=n.n(o),l=n(5),d=n(16),j=n.n(d),b=n(36),O=n.n(b),_=n(4),h=n(208),m=n(11),p=m.c,f=n(0);var x=function(e){var t=p((function(e){return e.ingredientsReducer})),n=t.counter,r=t.constructorIngredients,c=Object(h.a)({type:"item",item:e,collect:function(e){return{isDrag:e.isDragging()}}}),a=Object(l.a)(c,2),i=(a[0].isDrag,a[1]);return Object(f.jsx)("section",{onClick:function(){e.onItemClick(e)},ref:i,children:Object(f.jsxs)("div",{className:O.a.box,children:[Object(f.jsxs)("div",{className:O.a.wrapper,children:[Object(f.jsx)("img",{className:O.a.image,src:e.img,alt:e.name}),n[e._id]>0&&"bun"!==e.type&&Object(f.jsx)(_.Counter,{count:n[e._id],size:"default"}),function(t){return-1!==t.findIndex((function(t){return"bun"===t.type&&t._id===e._id}))}(r)&&Object(f.jsx)(_.Counter,{count:1,size:"default"})]}),Object(f.jsxs)("h3",{className:O.a.price,children:[Object(f.jsx)("p",{className:O.a.number,children:e.price}),Object(f.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("h4",{className:O.a.name,children:e.name})]})})},g=n(10),v=n(9);var E=function(e){var t=Object(g.h)(),n=p((function(e){return e.ingredientsReducer})).ingredients,a=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=c.a.useState("one"),d=Object(l.a)(u,2),b=d[0],O=d[1],h=c.a.useState([]),m=Object(l.a)(h,2),E=m[0],N=m[1],T=c.a.useState([]),y=Object(l.a)(T,2),I=y[0],S=y[1],k=c.a.useState([]),C=Object(l.a)(k,2),R=C[0],D=C[1];function L(t){e.onIngredientClick(t)}return Object(r.useEffect)((function(){N(n.filter((function(e){return"bun"===e.type}))),S(n.filter((function(e){return"sauce"===e.type}))),D(n.filter((function(e){return"main"===e.type})))}),[n]),Object(f.jsxs)("div",{className:j.a.body,children:[Object(f.jsx)("div",{className:j.a.header,children:Object(f.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(f.jsxs)("div",{className:j.a.nav,children:[Object(f.jsx)(_.Tab,{value:"one",active:"one"===b,onClick:function(e){O(e),a&&a.current&&a.current.scrollIntoView({behavior:"smooth"})},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(f.jsx)(_.Tab,{value:"two",active:"two"===b,onClick:function(e){O(e),i&&i.current&&i.current.scrollIntoView({behavior:"smooth"})},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(f.jsx)(_.Tab,{value:"three",active:"three"===b,onClick:function(e){O(e),o&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"})]}),Object(f.jsxs)("div",{className:j.a.ingredients,onScroll:function(e){var t=e.target.scrollTop;if(i&&i.current&&o&&o.current){var n=i.current.offsetTop,r=o.current.offsetTop;O(t+100<=n?"one":t+100<=r?"two":"three")}},children:[Object(f.jsxs)("section",{ref:a,children:[Object(f.jsx)("h2",{className:j.a.tag,children:" \u0411\u0443\u043b\u043a\u0438 "}),Object(f.jsx)("div",{className:j.a.container,children:E.map((function(e){return Object(f.jsx)(v.b,{className:j.a.link,to:{pathname:"/ingredient/".concat(e._id),state:{background:t}},children:Object(r.createElement)(x,Object(s.a)(Object(s.a)({},e),{},{key:e._id,img:e.image,price:e.price,name:e.name,onItemClick:L}))},e._id)}))})]}),Object(f.jsxs)("section",{ref:i,children:[Object(f.jsx)("h2",{className:j.a.tag,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(f.jsx)("div",{className:j.a.container,children:I.map((function(e){return Object(f.jsx)(v.b,{className:j.a.link,to:{pathname:"/ingredient/$".concat(e._id),state:{background:t}},children:Object(r.createElement)(x,Object(s.a)(Object(s.a)({},e),{},{onItemClick:L,key:e._id,img:e.image,price:e.price,name:e.name}))},e._id)}))})]}),Object(f.jsxs)("section",{ref:o,children:[Object(f.jsx)("h2",{className:j.a.tag,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(f.jsx)("div",{className:j.a.container,children:R.map((function(e){return Object(f.jsx)(v.b,{className:j.a.link,to:{pathname:"/ingredient/".concat(e._id),state:{background:t}},children:Object(r.createElement)(x,Object(s.a)(Object(s.a)({},e),{},{key:e._id,img:e.image,price:e.price,name:e.name,onItemClick:L}))},e._id)}))})]})]})]})},N=n(17),T=n.n(N);var y=function(){var e=p((function(e){return e.ingredientsReducer})),t=e.ingredientDetail,n=e.ingredients,r=Object(g.i)().id,c=0===Object.keys(t).length?n.find((function(e){return e._id===r})):t;return Object(f.jsx)("div",{className:T.a.box,children:Object(f.jsxs)("div",{className:T.a.container,children:[Object(f.jsx)("img",{className:T.a.image,src:null===c||void 0===c?void 0:c.image,alt:"name"}),Object(f.jsx)("h2",{className:T.a.descriptor,children:null===c||void 0===c?void 0:c.name}),Object(f.jsxs)("div",{className:T.a.list,children:[Object(f.jsx)("h4",{className:T.a.heading,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(f.jsx)("h4",{className:T.a.heading,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(f.jsx)("h4",{className:T.a.heading,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(f.jsx)("h4",{className:T.a.heading,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(f.jsx)("p",{className:T.a.numbers,children:null===c||void 0===c?void 0:c.calories}),Object(f.jsx)("p",{className:T.a.numbers,children:null===c||void 0===c?void 0:c.proteins}),Object(f.jsx)("p",{className:T.a.numbers,children:null===c||void 0===c?void 0:c.fat}),Object(f.jsx)("p",{className:T.a.numbers,children:null===c||void 0===c?void 0:c.carbohydrates})]})]})})},I=n.p+"static/media/check-mark.4f9c8f60.png",S=n(47),k=n.n(S),C=n(27),R=n.n(C);var D=function(e){var t=e.closeModal;return Object(f.jsx)("div",{className:e.isOpen?"".concat(R.a.modal_open," ").concat(R.a.overlay):R.a.overlay,onClick:function(e){e.target.classList.contains(R.a.overlay)&&t()},children:e.children})};var L=function(e){var t=document.getElementById("modal-root");return Object(r.useEffect)((function(){var t=function(t){"Escape"===t.key&&e.closeModal()};return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}),[]),i.a.createPortal(Object(f.jsx)(D,Object(s.a)(Object(s.a)({},e),{},{children:Object(f.jsxs)("div",{className:R.a.box,children:[Object(f.jsxs)("div",{className:R.a.btn,children:[Object(f.jsx)("h1",{className:R.a.title,children:e.title}),Object(f.jsx)(_.CloseIcon,{type:"primary",onClick:e.closeModal})]}),e.children]})})),t)};var w=function(e){var t=p((function(e){return e.ingredientsReducer})),n=t.order,r=t.isOrderDetailsOpen;return Object(f.jsxs)(L,{closeModal:e.closeModal,isOpen:r,children:[Object(f.jsx)("p",{className:"text text_type_digits-large",children:n}),Object(f.jsx)("h2",{className:k.a.title,children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(f.jsx)("img",{src:I,className:k.a.image,alt:"name"}),Object(f.jsx)("h3",{className:k.a.orderStatus,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("h3",{className:k.a.addInfo,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},U=n(14),A=n.n(U);var G=function(){return Object(f.jsx)("nav",{children:Object(f.jsxs)("div",{className:A.a.header,children:[Object(f.jsxs)("div",{className:A.a.navBox,children:[Object(f.jsx)("div",{className:A.a.btn,children:Object(f.jsxs)(v.c,{className:A.a.navBox2,to:"/",activeClassName:A.a.activeLink,children:[Object(f.jsx)(_.BurgerIcon,{type:"primary"}),Object(f.jsx)("p",{className:"text text_type_main-default ".concat(A.a.text),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(f.jsx)("div",{className:A.a.btn,children:Object(f.jsxs)(v.c,{className:A.a.navBox2,to:"/order",activeClassName:A.a.activeLink,children:[Object(f.jsx)(_.MenuIcon,{type:"primary"}),Object(f.jsx)("p",{className:"text text_type_main-default ".concat(A.a.text),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(f.jsx)("div",{className:A.a.logo,children:Object(f.jsx)(_.Logo,{})}),Object(f.jsxs)(v.c,{className:A.a.navBox2,to:"/profile",activeClassName:A.a.activeLink,children:[Object(f.jsx)(_.ProfileIcon,{type:"primary"}),Object(f.jsx)("span",{className:"text text_type_main-default ".concat(A.a.text),children:"\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},P=n(26),B=n.n(P),M=n(209),z=n.p+"static/media/bun01.ed27b2aa.png",F="https://norma.nomoreparties.space/api/",X=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))};var J="GET_INGREDIENTS_REQUEST",Q="GET_INGREDIENTS_SUCCESS",V="GET_INGREDIENTS_FAILED",W="GET_ORDER_INGREDIENTS_REQUEST",H="GET_ORDER_INGREDIENTS_SUCCESS",K="GET_ORDER_INGREDIENTS_FAILED",q="ADD_INGREDIENT_TO_CONSTRUCTOR",Y="ADD_INGREDIENT_TO_NON_BUN_ITEMS",Z="REMOVE_INGREDIENT_FROM_CONSTRUCTOR",$="SHOW_INGREDIENT",ee="INCREASE_COUNTER",te="DECREASE_COUNTER",ne="MOVE_INSIDE_CONSTRUCTOR",re="CLOSE_MODAL",ce="REORDER_CONSTRUCTOR",ae=function(){return function(e){e({type:J}),fetch("".concat(F,"ingredients")).then(X).then((function(t){var n;t&&t.success?e((n=t.data,{type:Q,ingredients:n})):e({type:V})})).catch((function(e){return console.log("failed",e)}))}},ie=function(e){return function(t){t(function(e){return{type:W,ingredientIds:e}}(e)),function(e){return fetch("".concat(F,"orders"),{method:"POST",body:JSON.stringify({ingredients:e}),headers:{"Content-Type":"application/json"}}).then(X)}(e).then((function(e){var n;e&&e.success?t((n=e.order.number,{type:H,order:n})):t({type:K})})).catch((function(e){return console.log("failed",e)}))}},se=n(107);function oe(e){var t=Object(r.useRef)(null),n=e.index,c=e._id,a=Object(m.b)();var i=Object(M.a)({accept:"primary",collect:function(e){return{isDrag:e.getHandlerId()}},hover:Object(se.debounce)((function(t,n){return function(t,n){var r=t.index,c=e.index;r!==c&&(a({type:ce,dragIndex:r,hoverIndex:c}),t.index=c,a({type:ne}))}(t)}),300)}),s=Object(l.a)(i,2),o=s[0].handlerId,u=s[1],d=Object(h.a)({type:"primary",item:function(){return{id:c,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(l.a)(d,2),b=j[0].isDragging;(0,j[1])(u(t));var O=b?0:1;return Object(f.jsxs)("div",{className:B.a.middleItemsList,ref:t,"data-handler-id":o,style:{opacity:O},children:[Object(f.jsx)(_.DragIcon,{type:"primary"}),Object(f.jsx)(_.ConstructorElement,{isLocked:!1,text:e.name,price:e.price,thumbnail:e.image,handleClose:function(){return function(e,t){a({type:Z,value:{id:e,index:t}}),a({type:ne}),a({type:te,itemId:e})}(e._id,e.index)}})]})}function ue(e,t,n){var r="";if(n){var c=new Date;c.setTime(c.getTime()+1e3*n),r="; expires="+c.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}function le(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var c=n[r];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(t))return c.substring(t.length,c.length)}return null}var de=function(e){var t=Object(g.g)(),n=p((function(e){return e.ingredientsReducer})),a=n.constructorIngredients,i=n.nonBunIngredientsList,o=Object(m.b)(),u=Object(r.useState)(0),d=Object(l.a)(u,2),j=d[0],b=d[1],O=c.a.useState({name:"add bun",image:z,price:0}),h=Object(l.a)(O,2),x=h[0],v=h[1];Object(r.useEffect)((function(){o({type:Y,items:a.filter((function(e){return"sauce"===e.type||"main"===e.type}))});var e=a.find((function(e){return"bun"===e.type}));e&&v(e)}),[a,o]);var E=Object(M.a)({accept:"item",drop:function(t){e.onDropHandler(t),"bun"===t.type&&v(t)}}),N=Object(l.a)(E,2)[1];return Object(r.useEffect)((function(){var e=i.map((function(e){return Number(e.price)})),t=x.price;b(e.reduce((function(e,t){return e+t}),t))}),[a,i,x]),Object(f.jsxs)("div",{className:B.a.box,ref:N,children:[Object(f.jsx)("section",{className:B.a.bunSection,children:Object(f.jsx)(_.ConstructorElement,{type:"top",isLocked:!0,text:x.name+"(\u0432\u0435\u0440\u0445)",price:x.price,thumbnail:x.image})}),Object(f.jsx)("div",{className:B.a.container,children:i.map((function(e,t){return Object(f.jsx)(oe,Object(s.a)(Object(s.a)({},e),{},{index:t}))}))}),Object(f.jsx)("section",{className:B.a.bunSection,children:Object(f.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:x.name+"(\u043d\u0438\u0437)",price:x.price,thumbnail:x.image})}),Object(f.jsxs)("div",{className:B.a.total,children:[Object(f.jsx)("h2",{className:B.a.sum,children:j}),Object(f.jsx)(_.CurrencyIcon,{type:"primary"}),Object(f.jsx)("button",{className:B.a.btn,onClick:function(){le("accessToken")?o(ie(a.map((function(e){return e._id})))):t.push("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},je=n(207),be=n(109),Oe=n(210),_e=n(48),he=n.n(_e),me=n(28),pe=n.n(me);function fe(e){return Object(f.jsxs)("div",{className:pe.a.extra,children:[Object(f.jsx)("h3",{className:pe.a.option,children:e.text}),Object(f.jsx)(v.b,{className:pe.a.link,to:e.route,children:e.linkText})]})}function xe(e){return Object(f.jsx)("div",{className:pe.a.main,children:Object(f.jsxs)("div",{className:pe.a.container,children:[Object(f.jsxs)("h2",{className:pe.a.title,children:[" ",e.title," "]}),Object(f.jsx)("form",{className:pe.a.form,onSubmit:function(t){e.onSubmit&&(t.preventDefault(),e.onSubmit())},children:e.children}),Object(f.jsx)(fe,{text:e.text,link:e.link,linkText:e.linkText,route:e.route})]})})}var ge="SET_USER_DATA",ve="REMOVE_USER",Ee=function(e){return function(t){return t(function(e){return{type:"GET_REGISTER_PROFILE_REQUEST",userData:e}}(e)),function(e){return fetch("".concat(F,"auth/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(X)}(e).then((function(e){return e&&e.success?t(function(e){return{type:"GET_REGISTER_PROFILE_SUCCESS",userData:e}}({user:e.user,refreshToken:e.refreshToken,accessToken:e.accessToken})):t({type:"GET_REGISTER_PROFILE_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}},Ne=function(e){return function(t){return t(function(e){return{type:"GET_LOGIN_REQUEST",userData:e}}(e)),function(e){return fetch("".concat(F,"auth/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(X)}(e).then((function(e){return e&&e.success?t(function(e){return{type:"GET_LOGIN_SUCCESS",userData:e}}({user:e.user,refreshToken:e.refreshToken,accessToken:e.accessToken})):t({type:"GET_LOGIN_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}},Te=function(e){return{type:"REORDER_PASSWORD_REQUEST",email:e}},ye=function(e){return function(t){return t(Te(e)),function(e){return fetch("".concat(F,"password-reset"),{method:"POST",body:JSON.stringify({email:e}),headers:{"Content-Type":"application/json"}}).then(X)}(e).then((function(e){return e&&e.success?t({type:"REORDER_PASSWORD_SUCCESS"}):t({type:"REORDER_PASSWORD_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}},Ie=function(e){return function(t){return t(Te(e)),function(e){return fetch("".concat(F,"auth/logout"),{method:"POST",body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json"}}).then(X)}(e).then((function(e){return e&&e.success?t({type:"REORDER_PASSWORD_SUCCESS"}):t({type:"REORDER_PASSWORD_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}},Se=function(e){return function(t){return t(function(e){return{type:"GET_USER_DATA_REQUEST",accessToken:e}}(e)),function(e){return fetch("".concat(F,"auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:e}}).then(X)}(e).then((function(e){return e&&e.success?t({type:"GET_USER_DATA_SUCCESS",user:{user:e.user,refreshToken:e.refreshToken,accessToken:e.accessToken}}):t({type:"GET_USER_DATA_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}},ke=function(e,t){return function(n){return n(function(e,t){return{type:"GET_UPDATE_USER_DATA_REQUEST",accessToken:e,user:t}}(e,t)),function(e,t){return fetch("".concat(F,"auth/user"),{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",authorization:e}}).then(X)}(e,t).then((function(e){return e&&e.success?n(function(e){return{type:"GET_UPDATE_USER_DATA_SUCCESS",user:e}}({user:e.user,refreshToken:e.refreshToken,accessToken:e.accessToken})):n({type:"GET_UPDATE_USER_DATA_FAILED"}),e})).catch((function(e){return console.log("failed",e)}))}};var Ce=function(){var e=Object(m.b)(),t=Object(r.useState)("bob@example.com"),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("password"),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(g.g)(),j=Object(g.h)();return Object(f.jsxs)("div",{className:he.a.container,children:[Object(f.jsxs)(xe,{onSubmit:function(){e(Ne({email:c,password:o})).then((function(e){return ue("accessToken",e.accessToken,1200),e})).then((function(e){var t;d.push(e.accessToken?null===(t=j.state)||void 0===t?void 0:t.from.pathname:"/")}))},title:"\u0412\u0445\u043e\u0434",text:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",link:"",linkText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",route:"/register",children:[Object(f.jsx)("div",{className:he.a.box,children:Object(f.jsx)(_.EmailInput,{onChange:function(e){a(e.target.value)},value:c,name:"email"})}),Object(f.jsx)("div",{className:he.a.box,children:Object(f.jsx)(_.PasswordInput,{onChange:function(e){u(e.target.value)},value:o,name:"password"})}),Object(f.jsx)("div",{className:he.a.button,children:Object(f.jsx)(_.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(f.jsx)(fe,{text:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"",linkText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",route:"/forgot-password"})]})},Re=n(29),De=n.n(Re);var Le=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(r.useState)(""),d=Object(l.a)(u,2),j=d[0],b=d[1],O=Object(m.b)(),h=Object(g.g)();return Object(f.jsxs)(xe,{onSubmit:function(){O(Ee({email:s,password:j,name:n})).then((function(e){sessionStorage.setItem("refreshToken",e.refreshToken);ue("accessToken",e.accessToken,1200)})).then((function(){return h.replace({pathname:"/"})}))},title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",link:"",linkText:"\u0412\u043e\u0439\u0442\u0438",route:"/login",children:[Object(f.jsx)("div",{className:De.a.box,children:Object(f.jsx)(_.Input,{type:"text",onChange:function(e){c(e.target.value)},placeholder:"\u0418\u043c\u044f",value:n,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsx)("div",{className:De.a.box,children:Object(f.jsx)(_.EmailInput,{onChange:function(e){o(e.target.value)},value:s,name:"email"})}),Object(f.jsx)("div",{className:De.a.box,children:Object(f.jsx)(_.PasswordInput,{onChange:function(e){b(e.target.value)},value:j,name:"password"})}),Object(f.jsx)("div",{className:De.a.button,children:Object(f.jsx)(_.Button,{type:"primary",size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})},we=n(81),Ue=n.n(we);var Ae=function(){var e=Object(r.useState)("bob@example.com"),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(g.g)(),i=Object(m.b)();return Object(f.jsxs)(xe,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"",linkText:"\u0412\u043e\u0439\u0442\u0438",route:"/login",onSubmit:function(){i(ye(n)).then((function(){return a.push({pathname:"/password-recovery",state:{fromRecovery:!0}})}))},children:[Object(f.jsx)("div",{className:Ue.a.box,children:Object(f.jsx)(_.EmailInput,{onChange:function(e){c(e.target.value)},value:n,name:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})}),Object(f.jsx)("div",{className:Ue.a.button,children:Object(f.jsx)(_.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]})},Ge=n(82),Pe=n.n(Ge),Be=n.p+"static/media/bun02.64328c34.png";function Me(){return Object(f.jsxs)("div",{className:Pe.a.box,children:[Object(f.jsx)("h2",{className:Pe.a.text,children:" 404 Not Found "}),Object(f.jsx)("img",{src:Be,alt:"\u0431\u0443\u043b\u043a\u0430"})]})}var ze=Object(g.j)((function(e){var t,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),u=o[0],d=o[1];return null!==(t=e.location.state)&&void 0!==t&&t.fromRecovery?Object(f.jsxs)(xe,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"",linkText:"\u0412\u043e\u0439\u0442\u0438",route:"/login",children:[Object(f.jsx)("div",{className:De.a.box,children:Object(f.jsx)(_.PasswordInput,{onChange:function(e){d(e.target.value)},value:u,name:"password"})}),Object(f.jsx)("div",{className:De.a.box,children:Object(f.jsx)(_.Input,{type:"text",onChange:function(e){i(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:a,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsx)("div",{className:De.a.button,children:Object(f.jsx)(_.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}):Object(f.jsx)(Me,{})})),Fe=n(37),Xe=n.n(Fe),Je=n(30),Qe=n.n(Je),Ve={user:{email:"",name:""},accessToken:"",refreshToken:""};var We=function(e){var t=Object(g.g)(),n=Object(m.b)(),r=le("accessToken");return Object(f.jsxs)("div",{className:Qe.a.navContainer,children:[Object(f.jsxs)("nav",{className:Qe.a.linksList,children:[Object(f.jsx)(v.c,{className:Qe.a.link,to:"/profile",activeClassName:Qe.a.activeLink,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(f.jsx)(v.c,{className:Qe.a.link,to:"/order",activeClassName:Qe.a.activeLink,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsx)("button",{type:"button",className:Qe.a.link,onClick:function(){n(Ie(r)).then((function(){return n({type:ve,userData:Ve})})).finally((function(){var e;sessionStorage.removeItem("refreshToken"),e="accessToken",document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",t.replace({pathname:"/login"})}))},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(f.jsx)("p",{className:Qe.a.paragraph,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})};var He=function(){var e=Object(m.b)(),t=p((function(e){return e.userReducer})).user,n=Object(r.useState)(t.name),c=Object(l.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(t.email),o=Object(l.a)(s,2),u=o[0],d=o[1],j=Object(r.useState)(""),b=Object(l.a)(j,2),O=b[0],h=b[1];function x(e){i(e.name),d(e.email),h("")}return Object(r.useEffect)((function(){var t=le("accessToken");t&&e(Se(t)).then((function(e){x(e.user)}))}),[e]),Object(f.jsxs)("div",{className:Xe.a.mainContainer,children:[Object(f.jsx)(We,{type:"profile"}),Object(f.jsxs)("div",{className:Xe.a.formContainer,children:[Object(f.jsx)("div",{className:Xe.a.box,children:Object(f.jsx)(_.Input,{type:"text",onChange:function(e){i(e.target.value)},placeholder:"\u0418\u043c\u044f",value:a,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsx)("div",{className:Xe.a.box,children:Object(f.jsx)(_.EmailInput,{onChange:function(e){d(e.target.value)},value:u,name:"email"})}),Object(f.jsx)("div",{className:Xe.a.box,children:Object(f.jsx)(_.PasswordInput,{onChange:function(e){h(e.target.value)},value:O,name:"password"})}),Object(f.jsxs)("div",{className:Xe.a.button,children:[Object(f.jsx)(_.Button,{type:"secondary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(f.jsx)(_.Button,{type:"primary",size:"large",onClick:function(){var t=le("accessToken");t&&e(ke(t,{name:a,email:u,password:O})).then((function(e){x(e.user)}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},Ke=n(83),qe=n.n(Ke);function Ye(){return Object(f.jsx)("div",{className:qe.a.container,children:Object(f.jsx)("h2",{className:qe.a.text,children:"Coming soon"})})}var Ze=n(56),$e=["children"];function et(e){var t=e.children,n=Object(Ze.a)(e,$e),r=le("accessToken");return Object(f.jsx)(g.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(f.jsx)(g.a,{to:{pathname:"/login",state:{from:n}}})}}))}var tt=["children"];function nt(e){var t=e.children,n=Object(Ze.a)(e,tt),r=le("accessToken");return Object(f.jsx)(g.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return r?Object(f.jsx)(g.a,{to:{pathname:"/",state:{from:n}}}):t}}))}var rt=function(){var e=Object(g.g)(),t=Object(g.h)(),n="PUSH"===e.action&&t.state&&t.state.background,c=Object(m.b)();function a(){c({type:re}),i&&e.goBack()}Object(r.useEffect)((function(){c(ae())}),[c]);var i=p((function(e){return e.ingredientsReducer})).isIngredientDetailsOpen;return Object(f.jsxs)("div",{className:u.a.app,children:[Object(f.jsx)(G,{}),Object(f.jsxs)(g.d,{location:n||t,children:[Object(f.jsx)(g.b,{path:["/","/react-burger"],exact:!0,children:Object(f.jsx)(je.a,{backend:be.a,children:Object(f.jsxs)("div",{className:u.a.bar,children:[Object(f.jsx)(E,{onIngredientClick:function(e){c({type:$,ingredient:e})}}),Object(f.jsx)(de,{onDropHandler:function(e){c({type:ee,itemId:e._id}),c({type:q,ingredient:Object(s.a)(Object(s.a)({},e),{},{key:Object(Oe.a)()})})}})]})})}),Object(f.jsx)(nt,{path:"/login",children:Object(f.jsx)(Ce,{})}),Object(f.jsx)(nt,{path:"/register",children:Object(f.jsx)(Le,{})}),Object(f.jsx)(nt,{path:"/forgot-password",children:Object(f.jsx)(Ae,{})}),Object(f.jsx)(nt,{path:"/password-recovery",children:Object(f.jsx)(ze,{})}),Object(f.jsx)(et,{path:"/profile",children:Object(f.jsx)(He,{})}),Object(f.jsx)(et,{path:"/order",children:Object(f.jsx)(Ye,{})}),Object(f.jsx)(g.b,{path:"/ingredient/:id",children:Object(f.jsx)(y,{})}),Object(f.jsx)(g.b,{children:Object(f.jsx)(Me,{})})]}),n&&Object(f.jsx)(g.b,{path:"/ingredient/:id",children:Object(f.jsx)(L,{closeModal:a,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",isOpen:i,children:Object(f.jsx)(y,{})})}),Object(f.jsx)(w,{closeModal:a})]})},ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},at=n(108),it=n(42),st=n(23),ot=n(31);function ut(e,t,n){var r=e[t],c=function(e,t){var n=Object(st.a)(e).splice(0,t),r=Object(st.a)(e).splice(t+1);return[].concat(Object(st.a)(n),Object(st.a)(r))}(Object(st.a)(e),t);return function(e,t,n){return[].concat(Object(st.a)(e.slice(0,t)),[n],Object(st.a)(e.slice(t)))}(c,n,r)}var lt={ingredientIds:[],ingredients:[],constructorIngredients:[],nonBunIngredientsList:[],dragContainer:[],ingredientDetail:{},order:null,isOrderDetailsOpen:!1,isIngredientDetailsOpen:!1,loader:!0,counter:{},itemsRequest:!1},dt=Object(ot.b)({ingredientsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(s.a)(Object(s.a)({},e),{},{itemsRequest:!0});case Q:return Object(s.a)(Object(s.a)({},e),{},{loader:!1,ingredients:t.ingredients});case V:return Object(s.a)(Object(s.a)({},e),{},{loader:!0});default:return e;case W:return Object(s.a)(Object(s.a)({},e),{},{ingredientIds:t.ingredientIds});case H:return Object(s.a)(Object(s.a)({},e),{},{order:t.order,isOrderDetailsOpen:!0});case K:return Object(s.a)(Object(s.a)({},e),{},{loader:!0});case q:var n="bun"===t.ingredient.type,r=Boolean(e.constructorIngredients.find((function(e){return"bun"===e.type})));if(n&&r){var c=e.constructorIngredients.filter((function(e){return"bun"!==e.type}));return c=[].concat(Object(st.a)(c),[t.ingredient]),Object(s.a)(Object(s.a)({},e),{},{constructorIngredients:c})}return Object(s.a)(Object(s.a)({},e),{},{constructorIngredients:[].concat(Object(st.a)(e.constructorIngredients),[t.ingredient])});case Y:return Object(s.a)(Object(s.a)({},e),{},{nonBunIngredientsList:t.items});case Z:return Object(s.a)(Object(s.a)({},e),{},{dragContainer:e.nonBunIngredientsList.filter((function(e,n){return n!==t.value.index}))});case $:return Object(s.a)(Object(s.a)({},e),{},{isIngredientDetailsOpen:!0,ingredientDetail:t.ingredient});case re:return Object(s.a)(Object(s.a)({},e),{},{isIngredientDetailsOpen:!1,isOrderDetailsOpen:!1,ingredientDetail:{}});case ce:return Object(s.a)(Object(s.a)({},e),{},{dragContainer:ut(e.nonBunIngredientsList,t.dragIndex,t.hoverIndex)});case ne:return Object(s.a)(Object(s.a)({},e),{},{constructorIngredients:[e.constructorIngredients[0]].concat(Object(st.a)(e.dragContainer))});case ee:var a=e.counter[t.itemId]?e.counter[t.itemId]:0;return Object(s.a)(Object(s.a)({},e),{},{counter:Object(s.a)(Object(s.a)({},e.counter),{},Object(it.a)({},t.itemId,a+1))});case te:var i=e.counter[t.itemId]?e.counter[t.itemId]:1;return Object(s.a)(Object(s.a)({},e),{},{counter:Object(s.a)(Object(s.a)({},e.counter),{},Object(it.a)({},t.itemId,i-1))})}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(s.a)(Object(s.a)({},e),{},{user:t.userData.user,refreshToken:t.userData.refreshToken,accessToken:t.userData.accessToken});case ve:return Object(s.a)(Object(s.a)({},e),{},{user:{email:"",name:""},accessToken:"",refreshToken:""});default:return e}}}),jt=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ot.c)(Object(ot.a)(at.a)),bt=Object(ot.d)(dt,jt);i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(v.a,{children:Object(f.jsx)(m.a,{store:bt,children:Object(f.jsx)(rt,{})})})}),document.getElementById("root")),ct()},26:function(e,t,n){e.exports={container:"burger-constructor_container__332QY",list:"burger-constructor_list__2lXaw",sum:"burger-constructor_sum__487I2",btn:"burger-constructor_btn__2h1tY",total:"burger-constructor_total__2z4fk",cunt:"burger-constructor_cunt__Pxrak",box:"burger-constructor_box__2RXMU",bunSection:"burger-constructor_bunSection__7_K7a",middleItemsList:"burger-constructor_middleItemsList__1bxi4"}},27:function(e,t,n){e.exports={box:"modal-overlay_box__2iUV4",btn:"modal-overlay_btn__1rGIK",overlay:"modal-overlay_overlay__AKixE",title:"modal-overlay_title__2XLtc",modal_open:"modal-overlay_modal_open__BkykD"}},28:function(e,t,n){e.exports={container:"auth_container__6JbhR",main:"auth_main__39ICt",option:"auth_option__3Ga2u",link:"auth_link__2EEES",extra:"auth_extra__3dUIX",form:"auth_form__2yqtY",title:"auth_title__2q0CF"}},29:function(e,t,n){e.exports={box:"registration_box__2wKKT",button:"registration_button__rLzSQ"}},30:function(e,t,n){e.exports={navContainer:"profile-navigation_navContainer__2nP7m",link:"profile-navigation_link__3iWW9",activeLink:"profile-navigation_activeLink__hhwI1",paragraph:"profile-navigation_paragraph__1Uadw",linksList:"profile-navigation_linksList__2-hdI"}},36:function(e,t,n){e.exports={box:"ingredient_box__3A1Z_",price:"ingredient_price__2oUC4",name:"ingredient_name__25JNI",number:"ingredient_number__1DkIb",image:"ingredient_image__1SSKq",wrapper:"ingredient_wrapper__1haVa"}},37:function(e,t,n){e.exports={mainContainer:"user-profile_mainContainer__zEnOm",formContainer:"user-profile_formContainer__2Lrq9",box:"user-profile_box__204P1",button:"user-profile_button__31dXX"}},47:function(e,t,n){e.exports={title:"order-ditails_title__23Wu7",image:"order-ditails_image__3QC6D",orderStatus:"order-ditails_orderStatus__3rs5r",addInfo:"order-ditails_addInfo__twf9H"}},48:function(e,t,n){e.exports={container:"enterence_container__1384X",box:"enterence_box__1_isw",button:"enterence_button__1clIx"}},78:function(e,t,n){e.exports={app:"app_app__M9MMq",bar:"app_bar__3US2P"}},81:function(e,t,n){e.exports={form:"forgot-password_form__2i2rR",box:"forgot-password_box__2_g_y",button:"forgot-password_button__zWl4U"}},82:function(e,t,n){e.exports={box:"not-found-page_box__nyuV9",text:"not-found-page_text__1bzml"}},83:function(e,t,n){e.exports={container:"order-feed_container__1jhjv",text:"order-feed_text__3duPQ"}}},[[201,1,2]]]);
//# sourceMappingURL=main.24014379.chunk.js.map